(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{186:function(e,t,a){e.exports=a(455)},191:function(e,t,a){},192:function(e,t,a){},280:function(e,t,a){},412:function(e,t,a){},434:function(e,t,a){},435:function(e,t,a){},453:function(e,t,a){},455:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(150),i=a.n(s),o=a(14),c=a(15),u=a(17),l=a(16),m=a(18),d=a(184),p=a(22),b=(a(191),a(6)),f=Object(b.b)(),v=(a(192),a(193),a(36)),h=a(38),E=a(92),S={zoomIn:{animation:"x 2s",animationName:h.a.keyframes(v.zoomIn,"zoomIn")}},N=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,null,r.a.createElement("div",{className:"center logoContainer",style:S.zoomIn},r.a.createElement("div",{className:"logo"},r.a.createElement("div",{className:"circleShape"},r.a.createElement("i",{className:"fal fa-bus busIcon"}))),r.a.createElement("div",{className:"logoText"},r.a.createElement("label",{htmlFor:""},"BusLeh..."))))}}]),t}(r.a.Component),y=a(39),g=a.n(y),C=a(68),k=(a(280),a(185)),j=a(93),O=(a(412),a(182)),B=a.n(O),w=(a(434),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"loaderMargin"},r.a.createElement(B.a,{type:"ThreeDots",color:this.props.color,height:"30",width:"30"}))}}]),t}(r.a.Component)),I=function(e){var t=e.isSubmitting;return r.a.createElement("div",{className:"submitButton"},r.a.createElement("button",{className:"ui button shadow",type:"submit",disabled:t},t?r.a.createElement(w,{color:"#8E54E9"}):"Submit"))},x={fadeIn:{animation:"x 2s",animationName:h.a.keyframes(v.fadeIn,"fadeIn")}},A=Object(k.a)({mapPropsToValues:function(e){return{busStopCode:e.busStopCode||"",busServiceNo:e.busServiceNo||""}},validationSchema:j.object().shape({busStopCode:j.string().max(5,"Bus stop code must be 5 digit long").required("Bus stop code is required!")}),handleSubmit:function(){var e=Object(C.a)(g.a.mark(function e(t,a){var n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setErrors,n=a.setSubmitting,a.props;try{n(!1),f.push("/busArrival/"+t.busStopCode)}catch(r){console.log("Failed to get a response",r)}case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()})(function(e){var t=e.values,a=e.touched,n=e.errors,s=e.isSubmitting,i=e.handleChange,o=e.handleBlur,c=e.handleSubmit;return r.a.createElement(E.a,null,r.a.createElement("div",{className:"formContainer",style:x.fadeIn},r.a.createElement("form",{onSubmit:c,className:"ui form"},r.a.createElement("div",{className:"field shadow"},r.a.createElement("input",{id:"busStopCode",placeholder:"Enter bus stop code",type:"number",value:t.busStopCode,onChange:i,onBlur:o,pattern:"\\d*",className:n.busStopCode&&a.busStopCode?"text-input error":"text-input"}),n.busStopCode&&a.busStopCode&&r.a.createElement("div",{className:"input-feedback errorText"},n.busStopCode)),r.a.createElement(I,{isSubmitting:s}))))}),D=a(48),L=a.n(D),M=(a(435),a(183)),T=a.n(M).a.create({baseURL:"https://cors-anywhere.herokuapp.com/http://datamall2.mytransport.sg/",headers:{AccountKey:"bhuGt2pYQOyl4X5xwj+VgQ==",accept:"application/json"}}),V=(a(453),L()()),Y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={busETA:0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getTimeDiffInMinutes()}},{key:"getTimeDiffInMinutes",value:function(e){var t=L()(e).diff(V,"minutes");return t<=0?"Arr":t}},{key:"render",value:function(){var e=this.props.bus.ServiceNo,t=this.props.bus.NextBus.EstimatedArrival;return r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"icon"},r.a.createElement("i",{className:"fal fa-bus bus"})),r.a.createElement("div",{className:"busNumber"},r.a.createElement("div",null,e)),r.a.createElement("div",{className:"busArrivalTime ".concat(Number(this.getTimeDiffInMinutes(t))?"grey":"green")},r.a.createElement("div",null,this.getTimeDiffInMinutes(t)))))}}]),t}(r.a.Component),z=L()().format("MMMM Do YYYY, h:mm:ss a"),q={fadeIn:{animation:"x 2s",animationName:h.a.keyframes(v.fadeIn,"fadeIn")}},P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).componentDidMount=Object(C.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.get("/ltaodataservice/BusArrivalv2?",{params:{BusStopCode:a.state.busStopCode}});case 2:(t=e.sent).data.Services.sort(function(e,t){return parseInt(e.ServiceNo)-parseInt(t.ServiceNo)}),a.setState({busDataArray:t.data.Services,isLoading:!1});case 5:case"end":return e.stop()}},e)})),a.onClickBackButton=function(){f.push("/")},a.state={busStopCode:a.props.match.params.busStopCode,busDataArray:[],isLoading:!0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"renderBackButton",value:function(){return r.a.createElement("div",{className:"backButton"},r.a.createElement("button",{onClick:this.onClickBackButton},"Back"))}},{key:"renderSpinner",value:function(){return r.a.createElement("div",{className:"spinnerBusList"},r.a.createElement(w,{color:"white"}),"Wait arh, Loading!")}},{key:"renderBusStopCode",value:function(){return r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"content signPostContainer"},r.a.createElement("div",{className:"icon"},r.a.createElement("i",{className:"fal fa-sign signPost"})),r.a.createElement("div",{className:"busStopCode"},r.a.createElement("div",null,this.state.busStopCode))))}},{key:"renderErrorMessage",value:function(){return r.a.createElement("div",null,"Error")}},{key:"renderBusItem",value:function(){return this.state.busDataArray.map(function(e,t){return r.a.createElement(Y,{bus:e,key:t})})}},{key:"renderBusList",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"ui container shadow",style:q.fadeIn},r.a.createElement("div",{className:"ui segment"},r.a.createElement("div",{className:"ui relaxed divided list"},this.renderBusStopCode(),0===this.state.busDataArray.length?this.renderErrorMessage():this.renderBusItem(),r.a.createElement("div",{className:"lastUpdatedTime"},r.a.createElement("label",null,"Last Updated: ",z))))),this.renderBackButton())}},{key:"render",value:function(){return r.a.createElement(E.a,null,this.state.isLoading?this.renderSpinner():this.renderBusList())}}]),t}(r.a.Component),U=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).onClickBackButton=function(){a.setState({busListView:!1})},a.showbusListView=function(e){a.setState({busListView:e})},a.getBusArrivalData=function(e){a.setState({data:e})},a.state={data:{}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"ui container bodyContainer"},r.a.createElement(N,null),r.a.createElement(d.a,{history:f},r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/",exact:!0,component:A}),r.a.createElement(p.a,{path:"/busArrival/:busStopCode",component:P})))))}}]),t}(r.a.Component);i.a.render(r.a.createElement(U,null),document.querySelector("#root"))}},[[186,1,2]]]);
//# sourceMappingURL=main.2bc3cd77.chunk.js.map