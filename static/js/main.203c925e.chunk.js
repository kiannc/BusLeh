(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{182:function(e,t,a){e.exports=a(451)},187:function(e,t,a){},188:function(e,t,a){},276:function(e,t,a){},408:function(e,t,a){},430:function(e,t,a){},431:function(e,t,a){},449:function(e,t,a){},451:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(147),i=a.n(s),c=a(11),o=a(12),u=a(14),l=a(13),m=a(15),d=a(453),p=(a(187),a(17)),b=Object(p.a)(),f=(a(188),a(189),a(34)),h=a(36),v=a(89),E={zoomIn:{animation:"x 2s",animationName:h.a.keyframes(f.zoomIn,"zoomIn")}},N=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement("div",{className:"center logoContainer",style:E.zoomIn},r.a.createElement("div",{className:"logo"},r.a.createElement("div",{className:"circleShape"},r.a.createElement("i",{className:"fal fa-bus busIcon"}))),r.a.createElement("div",{className:"logoText"},r.a.createElement("label",{htmlFor:""},"BusLeh..."))))}}]),t}(r.a.Component),S=a(37),y=a.n(S),C=a(64),g=(a(276),a(181)),j=a(90),k=(a(408),a(179)),O=a.n(k),B=(a(430),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"loaderMargin"},r.a.createElement(O.a,{type:"ThreeDots",color:this.props.color,height:"30",width:"30"}))}}]),t}(r.a.Component)),w=function(e){var t=e.isSubmitting;return r.a.createElement("div",{className:"submitButton"},r.a.createElement("button",{className:"ui button shadow",type:"submit",disabled:t},t?r.a.createElement(B,{color:"#8E54E9"}):"Submit"))},I={fadeIn:{animation:"x 2s",animationName:h.a.keyframes(f.fadeIn,"fadeIn")}},x=Object(g.a)({mapPropsToValues:function(e){return{busStopCode:e.busStopCode||"",busServiceNo:e.busServiceNo||""}},validationSchema:j.object().shape({busStopCode:j.string().max(5,"Bus stop code must be 5 digit long").required("Bus stop code is required!")}),handleSubmit:function(){var e=Object(C.a)(y.a.mark(function e(t,a){var n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setErrors,n=a.setSubmitting,a.props;try{n(!1),b.push("/busArrival/"+t.busStopCode)}catch(r){console.log("Failed to get a response",r)}case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()})(function(e){var t=e.values,a=e.touched,n=e.errors,s=e.isSubmitting,i=e.handleChange,c=e.handleBlur,o=e.handleSubmit;return r.a.createElement(v.a,null,r.a.createElement("div",{className:"formContainer",style:I.fadeIn},r.a.createElement("form",{onSubmit:o,className:"ui form"},r.a.createElement("div",{className:"field shadow"},r.a.createElement("input",{id:"busStopCode",placeholder:"Enter bus stop code",type:"number",value:t.busStopCode,onChange:i,onBlur:c,pattern:"\\d*",className:n.busStopCode&&a.busStopCode?"text-input error":"text-input"}),n.busStopCode&&a.busStopCode&&r.a.createElement("div",{className:"input-feedback errorText"},n.busStopCode)),r.a.createElement(w,{isSubmitting:s}))))}),L=a(45),A=a.n(L),D=(a(431),a(180)),M=a.n(D).a.create({baseURL:"https://cors-anywhere.herokuapp.com/http://datamall2.mytransport.sg/",headers:{AccountKey:"bhuGt2pYQOyl4X5xwj+VgQ==",accept:"application/json"}}),T=(a(449),A()()),V=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={busETA:0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getTimeDiffInMinutes()}},{key:"getTimeDiffInMinutes",value:function(e){var t=A()(e).diff(T,"minutes");return t<=0?"Arr":t}},{key:"render",value:function(){var e=this.props.bus.ServiceNo,t=this.props.bus.NextBus.EstimatedArrival;return r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"icon"},r.a.createElement("i",{className:"fal fa-bus bus"})),r.a.createElement("div",{className:"busNumber"},r.a.createElement("div",null,e)),r.a.createElement("div",{className:"busArrivalTime ".concat(Number(this.getTimeDiffInMinutes(t))?"grey":"green")},r.a.createElement("div",null,this.getTimeDiffInMinutes(t)))))}}]),t}(r.a.Component),Y=A()().format("MMMM Do YYYY, h:mm:ss a"),z={fadeIn:{animation:"x 2s",animationName:h.a.keyframes(f.fadeIn,"fadeIn")}},q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).componentDidMount=Object(C.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.get("/ltaodataservice/BusArrivalv2?",{params:{BusStopCode:a.state.busStopCode}});case 2:t=e.sent,a.setState({busDataArray:t.data.Services,isLoading:!1});case 4:case"end":return e.stop()}},e)})),a.onClickBackButton=function(){b.push("/")},a.state={busStopCode:a.props.match.params.busStopCode,busDataArray:[],isLoading:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"renderBackButton",value:function(){return r.a.createElement("div",{className:"backButton"},r.a.createElement("button",{onClick:this.onClickBackButton},"Back"))}},{key:"renderSpinner",value:function(){return r.a.createElement("div",{className:"spinnerBusList"},r.a.createElement(B,{color:"white"}),"Wait arh, Loading!")}},{key:"renderBusStopCode",value:function(){return r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"content signPostContainer"},r.a.createElement("div",{className:"icon"},r.a.createElement("i",{className:"fal fa-sign signPost"})),r.a.createElement("div",{className:"busStopCode"},r.a.createElement("div",null,this.state.busStopCode))))}},{key:"renderBusList",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"ui container shadow",style:z.fadeIn},r.a.createElement("div",{className:"ui segment"},r.a.createElement("div",{className:"ui relaxed divided list"},this.renderBusStopCode(),this.state.busDataArray.map(function(e,t){return r.a.createElement(V,{bus:e,key:t})}),r.a.createElement("div",{className:"lastUpdatedTime"},r.a.createElement("label",null,"Last Updated: ",Y))))),this.renderBackButton())}},{key:"render",value:function(){return r.a.createElement(v.a,null,this.state.isLoading?this.renderSpinner():this.renderBusList())}}]),t}(r.a.Component),P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).onClickBackButton=function(){a.setState({busListView:!1})},a.showbusListView=function(e){a.setState({busListView:e})},a.getBusArrivalData=function(e){a.setState({data:e})},a.state={data:{}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"ui container bodyContainer"},r.a.createElement(N,null),r.a.createElement(d.b,{history:b},r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/",exact:!0,component:x}),r.a.createElement(d.a,{path:"/busArrival/:busStopCode",component:q})))))}}]),t}(r.a.Component);i.a.render(r.a.createElement(P,null),document.querySelector("#root"))}},[[182,1,2]]]);
//# sourceMappingURL=main.203c925e.chunk.js.map