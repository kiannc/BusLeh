(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{187:function(e,t,a){e.exports=a(458)},192:function(e,t,a){},193:function(e,t,a){},281:function(e,t,a){},413:function(e,t,a){},435:function(e,t,a){},436:function(e,t,a){},453:function(e,t,a){},458:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(151),i=a.n(s),c=a(14),o=a(15),u=a(17),l=a(16),m=a(18),d=a(185),p=a(23),b=(a(192),a(6)),f=Object(b.b)(),v=(a(193),a(194),a(38)),h=a(40),E=a(93),N={zoomIn:{animation:"x 2s",animationName:h.a.keyframes(v.zoomIn,"zoomIn")}},g=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,null,r.a.createElement("div",{className:"center logoContainer",style:N.zoomIn},r.a.createElement("div",{className:"logo"},r.a.createElement("div",{className:"circleShape"},r.a.createElement("i",{className:"fal fa-bus busIcon"}))),r.a.createElement("div",{className:"logoText"},r.a.createElement("label",{htmlFor:""},"BusLeh..."))))}}]),t}(r.a.Component),S=a(19),y=a.n(S),k=a(41),C=(a(281),a(186)),j=a(94),O=(a(413),a(183)),B=a.n(O),w=(a(435),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"loaderMargin"},r.a.createElement(B.a,{type:"ThreeDots",color:this.props.color,height:"30",width:"30"}))}}]),t}(r.a.Component)),I=function(e){var t=e.isSubmitting;return r.a.createElement("div",{className:"submitButton"},r.a.createElement("button",{className:"ui button shadow",type:"submit",disabled:t},t?r.a.createElement(w,{color:"#8E54E9"}):"Submit"))},M={fadeIn:{animation:"x 2s",animationName:h.a.keyframes(v.fadeIn,"fadeIn")}},x=Object(C.a)({mapPropsToValues:function(e){return{busStopCode:e.busStopCode||"",busServiceNo:e.busServiceNo||""}},validationSchema:j.object().shape({busStopCode:j.string().max(5,"Bus stop code must be 5 digit long").required("Bus stop code is required!")}),handleSubmit:function(){var e=Object(k.a)(y.a.mark(function e(t,a){var n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setErrors,n=a.setSubmitting,a.props;try{n(!1),f.push("/busArrival/"+t.busStopCode)}catch(r){console.log("Failed to get a response",r)}case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()})(function(e){var t=e.values,a=e.touched,n=e.errors,s=e.isSubmitting,i=e.handleChange,c=e.handleBlur,o=e.handleSubmit;return r.a.createElement(E.a,null,r.a.createElement("div",{className:"formContainer",style:M.fadeIn},r.a.createElement("form",{onSubmit:o,className:"ui form"},r.a.createElement("div",{className:"field shadow"},r.a.createElement("input",{id:"busStopCode",placeholder:"Enter bus stop code",type:"number",value:t.busStopCode,onChange:i,onBlur:c,pattern:"\\d*",className:n.busStopCode&&a.busStopCode?"text-input error":"text-input"}),n.busStopCode&&a.busStopCode&&r.a.createElement("div",{className:"input-feedback errorText"},n.busStopCode)),r.a.createElement(I,{isSubmitting:s}))))}),A=a(29),T=a.n(A),L=(a(436),a(184)),D=a.n(L).a.create({baseURL:"https://cors-anywhere.herokuapp.com/http://datamall2.mytransport.sg/",headers:{AccountKey:"bhuGt2pYQOyl4X5xwj+VgQ==",accept:"application/json"}}),Y=(a(453),T()()),V=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={busETA:0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getTimeDiffInMinutes()}},{key:"getTimeDiffInMinutes",value:function(e){if(null===e||""===e||void 0===e)return"NEA";var t=T()(e).diff(Y,"minutes");return t<=0?"Arr":t}},{key:"isBusArriving",value:function(e){var t=this.getTimeDiffInMinutes(e);return"NEA"!==t&&!Number(t)}},{key:"render",value:function(){var e=this.props.bus.ServiceNo,t=this.props.bus.NextBus.EstimatedArrival;return r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"icon"},r.a.createElement("i",{className:"fal fa-bus bus"})),r.a.createElement("div",{className:"busNumber"},r.a.createElement("div",null,e)),r.a.createElement("div",{className:"busArrivalTime ".concat(this.isBusArriving(t)?"green":"grey")},r.a.createElement("div",null,this.getTimeDiffInMinutes(t)))))}}]),t}(r.a.Component),z=(T()().format("MMMM Do YYYY, h:mm:ss a"),{fadeIn:{animation:"x 2s",animationName:h.a.keyframes(v.fadeIn,"fadeIn")}}),P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).getLTA=Object(k.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.get("/ltaodataservice/BusArrivalv2?",{params:{BusStopCode:a.state.busStopCode}});case 2:(t=e.sent).data.Services.sort(function(e,t){return parseInt(e.ServiceNo)-parseInt(t.ServiceNo)}),a.setState({busDataArray:t.data.Services,isLoading:!1});case 5:case"end":return e.stop()}},e)})),a.componentDidMount=Object(k.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getLTA();case 2:a.interval=setInterval(Object(k.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getLTA();case 2:case"end":return e.stop()}},e)})),6e4);case 3:case"end":return e.stop()}},e)})),a.onClickBackButton=function(){f.push("/")},a.state={busStopCode:a.props.match.params.busStopCode,busDataArray:[],isLoading:!0,currentTime:T()().format("MMMM Do YYYY, h:mm:ss a")},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"getCurrentTime",value:function(){var e=this;return this.interval=setInterval(function(){e.setState({currentTime:T()().format("MMMM Do YYYY, h:mm:ss a")})},6e4),this.state.currentTime}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"renderBackButton",value:function(){return r.a.createElement("div",{className:"backButton"},r.a.createElement("button",{onClick:this.onClickBackButton},"Back"))}},{key:"renderSpinner",value:function(){return r.a.createElement("div",{className:"spinnerBusList"},r.a.createElement(w,{color:"white"}),"Wait arh, Loading!")}},{key:"renderBusStopCode",value:function(){return r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"content signPostContainer"},r.a.createElement("div",{className:"icon"},r.a.createElement("i",{className:"fal fa-sign signPost"})),r.a.createElement("div",{className:"busStopCode"},r.a.createElement("div",null,this.state.busStopCode))))}},{key:"renderErrorMessage",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"errorIconContainer"},r.a.createElement("i",{className:"fal fa-exclamation-triangle errorIcon"})),r.a.createElement("div",{className:"errorMessage"},r.a.createElement("p",null,"Sorry! We are unable to find the arrival time for this bus stop, Please ensure the code you entered is a valid one.")))}},{key:"renderBusItem",value:function(){return this.state.busDataArray.map(function(e,t){return r.a.createElement(V,{bus:e,key:t})})}},{key:"renderBusList",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"ui container shadow",style:z.fadeIn},r.a.createElement("div",{className:"ui segment"},r.a.createElement("div",{className:"ui relaxed divided list"},this.renderBusStopCode(),0===this.state.busDataArray.length?this.renderErrorMessage():this.renderBusItem(),r.a.createElement("div",{className:"lastUpdatedTime"},r.a.createElement("label",null,"Last Updated: ",this.getCurrentTime()))))),this.renderBackButton())}},{key:"render",value:function(){return r.a.createElement(E.a,null,this.state.isLoading?this.renderSpinner():this.renderBusList())}}]),t}(r.a.Component),U=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).onClickBackButton=function(){a.setState({busListView:!1})},a.showbusListView=function(e){a.setState({busListView:e})},a.getBusArrivalData=function(e){a.setState({data:e})},a.state={data:{}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"ui container bodyContainer"},r.a.createElement(g,null),r.a.createElement(d.a,{history:f},r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/",exact:!0,component:x}),r.a.createElement(p.a,{path:"/busArrival/:busStopCode",component:P})))))}}]),t}(r.a.Component);a(455).config(),i.a.render(r.a.createElement(U,null),document.querySelector("#root"))}},[[187,1,2]]]);
//# sourceMappingURL=main.7dceee27.chunk.js.map